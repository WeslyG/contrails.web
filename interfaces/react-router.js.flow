// @flow
/* eslint-disable */
declare module 'react-router' {
    declare class ReactRouter {
        push(location: RouterLocationDescriptor): void;
        replace(location: RouterLocationDescriptor): void;
    }

    declare function withRouter<P>(Comp: React$ComponentType<P>): React$ComponentType<$Diff<P, { router: ReactRouter }>>;

    declare type LocationDescriptor = {
        pathname: string;
        search?: ?string;
        state?: ?Object;
    };

    declare type RouterLocationDescriptor =
        string |
        {
            pathname: string;
            search?: ?string;
            state?: ?Object;
        };


    declare interface IBrowserHistory {
        push(location: RouterLocationDescriptor): void;
        replace(location: RouterLocationDescriptor): void;
    }

    declare var Link: any;
    declare var IndexRedirect: any;

    declare var browserHistory: IBrowserHistory;

    declare type RouteParams = { [key: string]: ?string };

    declare type RouteOptions = {
        match: {
            params: RouteParams;
        },
        location: {
            pathname: string;
            search?: ?string;
            query?: { [key: string]: ?string };
            state?: ?Object;
        };
        children?: any;
    }

    declare type RouteProps = {
        exact?: boolean;
        path?: string;
        component?: React$ComponentType<RouteOptions>;
        children?: React$Node,
        onEnter?: (options: RouteOptions) => void | Promise<void>;
        onLeave?: () => void | Promise<void>;
        [stringPropName: string]: string;
    }
    declare class Route extends React$Component<RouteProps, void> { }

    declare type SwitchProps = {
        children: React$Node,
    }

    declare class Switch extends React$Component<SwitchProps> { }

    declare type IndexRouteProps = {
        component?: (options: RouteOptions) => React$Element<*> | Class<React$Component<void, RouteOptions, void>>;
        children?: any;
        onEnter?: (options: RouteOptions) => void | Promise<void>;
        onLeave?: () => void | Promise<void>;
        onChange?: (prevOptions: RouteOptions, options: RouteOptions) => void | Promise<void>;
        [stringPropName: string]: string;
    }
    declare class IndexRoute extends React$Component<IndexRouteProps, void> { }


    declare type RouterProps = {|
        history: IBrowserHistory;
        children?: any;
        routes?: ?any[];
        render?: React$ComponentType<any>;
    |}
    declare var Router: React$ComponentType<RouterProps>;

    declare type RouterMiddleware = {
        renderRouteComponent?: any;
        renderRouterContext?: any;
    };

    declare function applyRouterMiddleware(...middlewares: RouterMiddleware[]): React$ComponentType<any>
}
